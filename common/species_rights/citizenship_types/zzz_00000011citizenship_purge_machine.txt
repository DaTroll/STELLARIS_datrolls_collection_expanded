citizenship_purge_machine = {
    new_pop_weight = 0
    is_purge = yes
    potential = {
        exists = from
        from = {
            has_authority = auth_machine_intelligence
        }
        OR = {
            NOT = {
                from = {
                    has_valid_civic = civic_machine_servitor
                }
            }
            from = {
                has_ascension_perk = ap_become_the_crisis
            }
            is_lonely_hive_mind_pop = yes
            has_trait = trait_machine_unit
            has_trait = trait_mechanical
            has_trait = trait_zombie
        }
    }
    allow = {
        hidden_trigger = {
            exists = from
        }
        custom_tooltip = {
            fail_text = same_species_disallowed
            NOT = {
                is_same_species = from
            }
        }
        custom_tooltip = {
            fail_text = "presapients_not_purged_citizenship"
            OR = {
                is_sapient = yes
                from = {
                    NOR = {
                        has_policy_flag = pre_sapients_protect
                        has_policy_flag = pre_sapients_allow
                    }
                }
            }
        }
    }
    ai_will_do = {
        factor = 0
    }
}
